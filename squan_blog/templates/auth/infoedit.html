{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block head %}
{{ super() }}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='lib/css/infoedit.css') }}">
{% endblock %}

{% block title %}初度·{{ user.username }}{% endblock %}

{% block page_content %}
<div class="container-fluid">
	<div class="row">
		<form action="" method="post" class="form" role="form" enctype="multipart/form-data">
			<div class="col-md-12" id="editFrame">
				<div class="row">
					<div class="col-md-12" id="contentFrame">
						{{ form.hidden_tag() }}
						<h2>{{ user.username }}</h2>
						<hr />
						{{ wtf.form_field(form.avatarimg, style="height:0; display: none;") }}
						<div id="avatarPreview"></div>
						<div id="avatarLabel">
							<label for="avatarimg">
								<img id="avatarimgOrigin" src="{{ url_for('static', filename='img/avatar/' + user.avatar) }}" class="img-rounded" alt="上传头像" />
							</label>
						</div>
						{{ wtf.form_field(form.birthdate) }}
						{{ wtf.form_field(form.intrtext) }}
					</div>
				</div>
				<div class="row">
					<div class="col-md-4">
						{{ wtf.form_field(form.submit) }}
					</div>
					<div class="col-md-4">
						<a href="{{ url_for('.infoedit', username=current_user.username) }}" class="actionBtn">重置</a>
					</div>
					<div class="col-md-4">
						<a href="{{ url_for('.userinfo', username=current_user.username) }}" class="actionBtn">回退</a>
					</div>
				</div>
			</div>
		</form>
	</div>
</div>
<script type="text/javascript">
	function reset() {
		console.log('reset')
		document.getElementById('birthdate').value = {{ current_user.birthdate }};
		document.getElementById('intrtext').innerHTML = "{{ current_user.intr }}";

		document.getElementById('avatarimg').value = null;
	}
</script>
<script type="text/javascript" src="{{ url_for('static', filename='lib/js/infoedit.js') }}"></script>
{% endblock %}
